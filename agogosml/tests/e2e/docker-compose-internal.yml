version: "3.7"

services:
  input-reader:
    image: agogosacr.azurecr.io/input_reader:${TAG}
    env_file: .env
    networks:
      mynet:
        aliases:
          - input

  output-writer:
    image: agogosacr.azurecr.io/output_writer:${TAG}
    env_file: output.env
    ports:
     - "127.0.0.1:6000:6000"
    networks:
      mynet:
        aliases:
          - output

  sample-app:
    image: agogosacr.azurecr.io/sample_app:${APP_TAG}
    env_file: app.env
    ports:
     - "127.0.0.1:3000:3000"
    networks:
      mynet:
        aliases:
          - sample

networks:
  mynet: